{% extends 'AppZorro/base.html' %}

{% load static %}

{% block title %}El Zorrito | Rubros {% endblock title %}

{% block main %}


<div class="container mt-4">
    <div class="row">
    <div class="col-md-6">
        <div class="card rounded-3 text-black">
            <div class="card-body p-md-5 mx-md-3">
                <h3 class="display-5">Rubros</h3>
                <div class="d-flex justify-content-end mb-3">
                    <a class="btn btn-info px-3" href="{% url 'CrearRubro' %}">Agregar nuevo</a>
                </div>
                
                {{ fijaciones }} {{ titulo }}
                    <table class="text-center table table-striped table-sm table-bordered">
                        <thead class="thead-primary">
                            <tr class="text-bg-info p-3">
                                <th scope="col">Rubro</th>
                                <th scope="col">Ingresos</th>
                                <th scope="col">Egresos</th>
                                <th scope="col" class="bi bi-pen"></th>
                                <th scope="col" class="bi bi-trash2"></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for rubro in object_list %}
                                <tr>
                                    <td>{{ rubro.titulo }}</td>
                                    <td>{{ rubro.suma_ingreso }}</td>
                                    <td>{{ rubro.suma_egreso }}</td>
                                    {% if rubro.id != 23 %}
                                    <td><a class="bi bi-pen text-dark" href="{% url 'EditarRubro' rubro.id %}"></a></td> 
                                    <td><a class="bi bi-trash2 text-dark" href="{% url 'BorrarRubro' rubro.id %}"></a></td> 
                                    {% else %}
                                    <td></td> 
                                    <td></td> 
                                    {% endif %}
                                </tr>
                            {% empty %}
                                <tr><th><h6>No hay nada por acá. </h6></th></tr>
                                <th><h6>El Zorrito estaria feliz si cargas algún rubro...</h6></th>
                            {% endfor %}
                    </table>
                </div>
                
        </div>
    </div>
    <div class="col-md-6">
        <div class="card rounded-3 text-black">
            <div class="card-body p-md-5">
                <p class="display-6">Resumen</p>
            <table class="text-center table table-hover table-bordered">
                <thead class="thead-primary">
                    <tr class="text-bg-info p-3">
                        <th scope="col">Concepto</th>
                        <th scope="col">Importe</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <td scope="row">Ingresos</td>
                    <td scope="col">{{ ingresos }}</td>
                    </tr>
                    <td scope="col">Egresos</td>
                    <td scope="col">{{ egresos }}</td>
                    <tr>
                    <td scope="col">Saldo</td>
                    <td scope="col">{{ saldo }}</td>
                </tr>
                </tbody>
            </table>
            <div class="text-center m-0 p-0">
            <img src="data:image/png;base64,{{ grafico }}" alt="Gráfico de Torta"  class="img-fluid ">

        </div>
    </div>
    </div>
    </div>
</div>

{% endblock main %}